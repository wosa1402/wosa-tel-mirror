{
  "id": "4702e795-33bc-4d51-8640-82da6d429f89",
  "prevId": "40ee6e45-9661-4a1d-9e80-cd7a9292e8e9",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.source_channels": {
      "name": "source_channels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "group_name": {
          "name": "group_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "channel_identifier": {
          "name": "channel_identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "telegram_id": {
          "name": "telegram_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "access_hash": {
          "name": "access_hash",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "subscribed_at": {
          "name": "subscribed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_sync_at": {
          "name": "last_sync_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "sync_status": {
          "name": "sync_status",
          "type": "sync_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "last_message_id": {
          "name": "last_message_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_protected": {
          "name": "is_protected",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "member_count": {
          "name": "member_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_messages": {
          "name": "total_messages",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "mirror_mode": {
          "name": "mirror_mode",
          "type": "mirror_mode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'forward'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "message_filter_mode": {
          "name": "message_filter_mode",
          "type": "message_filter_mode",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'inherit'"
        },
        "message_filter_keywords": {
          "name": "message_filter_keywords",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        }
      },
      "indexes": {
        "source_channels_channel_identifier_idx": {
          "name": "source_channels_channel_identifier_idx",
          "columns": [
            {
              "expression": "channel_identifier",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "source_channels_group_name_idx": {
          "name": "source_channels_group_name_idx",
          "columns": [
            {
              "expression": "group_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "source_channels_sync_status_idx": {
          "name": "source_channels_sync_status_idx",
          "columns": [
            {
              "expression": "sync_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "source_channels_telegram_id_unique": {
          "name": "source_channels_telegram_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "telegram_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.mirror_channels": {
      "name": "mirror_channels",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "source_channel_id": {
          "name": "source_channel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "channel_identifier": {
          "name": "channel_identifier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "telegram_id": {
          "name": "telegram_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "access_hash": {
          "name": "access_hash",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "invite_link": {
          "name": "invite_link",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_auto_created": {
          "name": "is_auto_created",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "mirror_channels_source_channel_id_source_channels_id_fk": {
          "name": "mirror_channels_source_channel_id_source_channels_id_fk",
          "tableFrom": "mirror_channels",
          "tableTo": "source_channels",
          "columnsFrom": [
            "source_channel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "mirror_channels_source_channel_id_unique": {
          "name": "mirror_channels_source_channel_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "source_channel_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.message_mappings": {
      "name": "message_mappings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "source_channel_id": {
          "name": "source_channel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "source_message_id": {
          "name": "source_message_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "mirror_channel_id": {
          "name": "mirror_channel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "mirror_message_id": {
          "name": "mirror_message_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "message_type": {
          "name": "message_type",
          "type": "message_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "media_group_id": {
          "name": "media_group_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "message_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "skip_reason": {
          "name": "skip_reason",
          "type": "skip_reason",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "retry_count": {
          "name": "retry_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "has_media": {
          "name": "has_media",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "file_size": {
          "name": "file_size",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "text": {
          "name": "text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "text_preview": {
          "name": "text_preview",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "mirrored_at": {
          "name": "mirrored_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_deleted": {
          "name": "is_deleted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "edit_count": {
          "name": "edit_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_edited_at": {
          "name": "last_edited_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "unique_source_message": {
          "name": "unique_source_message",
          "columns": [
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source_message_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "channel_sent_at_idx": {
          "name": "channel_sent_at_idx",
          "columns": [
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "sent_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "sent_channel_message_idx": {
          "name": "sent_channel_message_idx",
          "columns": [
            {
              "expression": "sent_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source_message_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "status_channel_idx": {
          "name": "status_channel_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "media_group_idx": {
          "name": "media_group_idx",
          "columns": [
            {
              "expression": "media_group_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "message_mappings_source_channel_id_source_channels_id_fk": {
          "name": "message_mappings_source_channel_id_source_channels_id_fk",
          "tableFrom": "message_mappings",
          "tableTo": "source_channels",
          "columnsFrom": [
            "source_channel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "message_mappings_mirror_channel_id_mirror_channels_id_fk": {
          "name": "message_mappings_mirror_channel_id_mirror_channels_id_fk",
          "tableFrom": "message_mappings",
          "tableTo": "mirror_channels",
          "columnsFrom": [
            "mirror_channel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.message_edits": {
      "name": "message_edits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "message_mapping_id": {
          "name": "message_mapping_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "previous_text": {
          "name": "previous_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "new_text": {
          "name": "new_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "edited_at": {
          "name": "edited_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "unique_message_edit_version": {
          "name": "unique_message_edit_version",
          "columns": [
            {
              "expression": "message_mapping_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "message_edits_mapping_version_idx": {
          "name": "message_edits_mapping_version_idx",
          "columns": [
            {
              "expression": "message_mapping_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "version",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "message_edits_message_mapping_id_message_mappings_id_fk": {
          "name": "message_edits_message_mapping_id_message_mappings_id_fk",
          "tableFrom": "message_edits",
          "tableTo": "message_mappings",
          "columnsFrom": [
            "message_mapping_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sync_tasks": {
      "name": "sync_tasks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "source_channel_id": {
          "name": "source_channel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "task_type": {
          "name": "task_type",
          "type": "task_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "task_status",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "progress_current": {
          "name": "progress_current",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "progress_total": {
          "name": "progress_total",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "last_processed_id": {
          "name": "last_processed_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "failed_count": {
          "name": "failed_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "skipped_count": {
          "name": "skipped_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "paused_at": {
          "name": "paused_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "unique_sync_task_channel_type": {
          "name": "unique_sync_task_channel_type",
          "columns": [
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "task_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "channel_status_idx": {
          "name": "channel_status_idx",
          "columns": [
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "status_created_idx": {
          "name": "status_created_idx",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sync_tasks_source_channel_id_source_channels_id_fk": {
          "name": "sync_tasks_source_channel_id_source_channels_id_fk",
          "tableFrom": "sync_tasks",
          "tableTo": "source_channels",
          "columnsFrom": [
            "source_channel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sync_events": {
      "name": "sync_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "source_channel_id": {
          "name": "source_channel_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "level": {
          "name": "level",
          "type": "event_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "event_channel_created_idx": {
          "name": "event_channel_created_idx",
          "columns": [
            {
              "expression": "source_channel_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sync_events_source_channel_id_source_channels_id_fk": {
          "name": "sync_events_source_channel_id_source_channels_id_fk",
          "tableFrom": "sync_events",
          "tableTo": "source_channels",
          "columnsFrom": [
            "source_channel_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.settings": {
      "name": "settings",
      "schema": "",
      "columns": {
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.message_filter_mode": {
      "name": "message_filter_mode",
      "schema": "public",
      "values": [
        "inherit",
        "disabled",
        "custom"
      ]
    },
    "public.mirror_mode": {
      "name": "mirror_mode",
      "schema": "public",
      "values": [
        "forward",
        "copy"
      ]
    },
    "public.sync_status": {
      "name": "sync_status",
      "schema": "public",
      "values": [
        "pending",
        "syncing",
        "completed",
        "error"
      ]
    },
    "public.message_status": {
      "name": "message_status",
      "schema": "public",
      "values": [
        "pending",
        "success",
        "failed",
        "skipped"
      ]
    },
    "public.message_type": {
      "name": "message_type",
      "schema": "public",
      "values": [
        "text",
        "photo",
        "video",
        "document",
        "audio",
        "voice",
        "animation",
        "sticker",
        "other"
      ]
    },
    "public.skip_reason": {
      "name": "skip_reason",
      "schema": "public",
      "values": [
        "protected_content",
        "file_too_large",
        "unsupported_type",
        "rate_limited_skip",
        "failed_too_many_times",
        "message_deleted",
        "filtered"
      ]
    },
    "public.task_status": {
      "name": "task_status",
      "schema": "public",
      "values": [
        "pending",
        "running",
        "paused",
        "completed",
        "failed"
      ]
    },
    "public.task_type": {
      "name": "task_type",
      "schema": "public",
      "values": [
        "resolve",
        "history_full",
        "history_partial",
        "realtime",
        "retry_failed"
      ]
    },
    "public.event_level": {
      "name": "event_level",
      "schema": "public",
      "values": [
        "info",
        "warn",
        "error"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
# Database (Supabase Postgres)
DATABASE_URL=
DATABASE_URL_LISTEN=

# Shared secret (used later for encrypting telegram session in DB)
ENCRYPTION_SECRET=

# Web access password（推荐：公网部署时务必设置）
# - 首次启动如果数据库里还没有 access_password，这个值会被自动“加盐哈希”后写入 settings 表，用于开启 Web 访问控制。
# - 如果你不设置这个变量，生产环境下 Web 会自动生成一个“初始访问密码”，并打印到服务端日志里（你需要去日志里找）。
TG_BACK_BOOTSTRAP_ACCESS_PASSWORD=

# 是否信任反向代理注入的客户端 IP 头（只影响限流，不影响业务）
# - false（默认）：不信任 X-Forwarded-For/X-Real-IP，所有请求会共用同一个限流桶（更安全，但更“严格”）。
# - true：信任这些头并解析客户端 IP（适用于你确定自己在 Nginx/Caddy/Cloudflare 等可信代理之后）。
TG_BACK_TRUST_PROXY=false

# Telegram (MTProto, user account)
TELEGRAM_API_ID=
TELEGRAM_API_HASH=
TELEGRAM_PHONE=

# PoC only: if provided, skips interactive login
TELEGRAM_SESSION=

# PoC inputs
TG_POC_SOURCE_CHAT=
TG_POC_TARGET_CHAT=me
TG_POC_MODE=forward
TG_POC_LIMIT=5
# PoC quick test: mirror specific message links (comma/space separated). When set, overrides TG_POC_SOURCE_CHAT/TG_POC_LIMIT.
TG_POC_MESSAGE_LINKS=
# PoC: mirror comments for a post (requires target chat has linked discussion group)
TG_POC_SYNC_COMMENTS=true
TG_POC_MAX_COMMENTS=200

# mirror-service options
# Set to "false" to disable syncing channel comments.
MIRROR_SYNC_COMMENTS=true
# Safety cap for syncing comments per post (default 500, max 10000)
MIRROR_MAX_COMMENTS_PER_POST=500
# mirror-service 启动重试间隔（秒）：首次部署还没登录 Telegram / 数据库短暂不可用时会等待并重试
MIRROR_START_RETRY_INTERVAL_SEC=10
# Optional: write mirror-service logs to a file (in addition to stdout), e.g. ./logs/mirror-service.log
MIRROR_LOG_FILE=
# history_full：如果因为 Telegram/网络波动导致“历史拉取提前结束”，mirror-service 会自动继续跑（避免误判 completed）
# Telegram 限流（FloodWait）自动处理上限（秒，默认 600；最大 3600）
# - wait <= 上限：mirror-service 会自动 sleep 然后继续（不需要你手动点恢复）
# - wait > 上限：任务会先暂停，但 mirror-service 会在等待时间到后自动恢复为 pending 继续跑
MIRROR_FLOOD_WAIT_MAX_SEC=600
